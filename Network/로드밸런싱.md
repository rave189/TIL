## 로드밸런싱

로드 밸런싱은 서버에 가해지는 부하(로드)를 분산(밸런싱)하는 장치 또는 기술을 의미한다.

웹사이트의 접속 인원이 급증함에 따라 서버가 이 트래픽을 모두 견딜 수가 없다.

이러한 현상에 대한 대응 방안으로 하드웨어의 성능을 올리는 Scale-up과 서버를 추가하여 여러 대의 서버가 나눠서 일하도록 만드는 것을 Scale-out이다.

- 하드웨어의 값이 비싸 Scale-out이 효과적이다.

여기서 여러 대의 서버에게 트래픽을 균등하게 분산시켜주는 것이 로드 밸런싱이다.



로드 밸런싱 알고리즘

- 라운드 로빈
- 가중 라운드 로빈
- 최소 연결 방식
- IP 해시 방식



<h4>L4 로드 밸런싱</h4>

4계층인 Tranport 계층에서 로드를 분산한다.

TCP, UDP 포트 정보를 바탕으로 분산한다.

데이터 안을 보지 않고 패킷 레벨에서만 로드를 분산하기 때문에 속도가 빠르고 효율이 높다.

섬세한 라우팅이 불가능하지만 L7 밸런서보다 저렴하다.



<h4>L7 로드 밸런싱</h4>

7계층인 Application 계층에서 로드를 분산한다.

HTTP 헤더, 쿠키 등 사용자 요청을 기준으로 특정 서버에 트래픽을 분산하는 것이 가능하다.

즉, 패킷 내용을 확인하고 그 내용에 따라 서버에 분배하는 것이 가능하다.

섬세한 라우팅이 가능하고, 비정상적인 트래픽을 필터링 할 수 있다.

패킷을 복호화해야 하기 때문에 비용이 많이 든다.

로드 밸런싱을 이중화하여 장애를 대비한다.