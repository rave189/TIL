<h1>TCP</h1>

전송계층의 연결형 서비스이다.

데이터의 전송 순서를 보장한다.

데이터 흐름 제어와 혼잡 제어의 기능을 한다.

통신하는 두 단말기가 동시에 양방향으로 데이터를 전송할 수 있는 전이중 전송 방식을 사용한다.

두 단말기를 직접 연결하기 때문에 점대점 방식을 사용한다.

연결형 서비스이기 때문에 UDP보다 전송속도가 느리다.

클라이언트와 서버를 연결하기 위해 3-way-handshake 방식을 사용하고, 연결을 종료하기 위해 4-way-handshake 방식을 사용한다.

3-way-handshake은 클라이언트와 서버를 연결하기 위해 사용하는 방식이다.

![3-way-handshake](C:\Users\Rave\Desktop\2.png)

- 클라이언트에서 서버로 SYN 신호를 보내고 자신은 SYN-SENT 상태가 된다.

- 서버에서는 SYN를 받고 클라이언트로 SYN와 ACK 신호를 보내며 자신은 SYN-RECEIVED 상태가 된다.

- 클라이언트는 SYN와 ACK를 받고 서버로 ACK를 보내며 자신은 ESTABLISHED 상태가 되며 연결이 되었다고 판단한다.

- 서버도 ACK를 받고 ESTABLISHED 상태가 되며 연결이 되었다고 판단한다.



4-way-handshake은 클라이언트와 서버의 연결을 해제하기 위해 사용하는 방식이다.

![4-way-handshake](C:\Users\Rave\Desktop\3.png)

- 연결이 되어있는 상태에서 클라이언트가 서버로 FIN 신호를 보내며 자신은 FIN-WAIT-1상태가 된다.

- 서버에서는 클라이언트의 FIN 신호를 받고 ACK 신호를 보내며 자신은 CLOSE-WAIT 상태가 된다.

- 서버에서 통신이 끝나 연결을 종료할 준비가 끝나면 클라이언트로 FIN 신호를 보내며 자신은 LAST-ACK 상태가 된다.

- 클라이언트에서는 서버의 FIN 신호를 받고 ACK 신호를 보내며 자신은 TIME-WAIT 상태가 된다.
  - TIME-WAIT상태가 되는 이유는 클라이언트에서 세션을 종료시킨 후 도착하는 패킷이 있을 수 있어 종료한 후 일정 시간 동안 세션을 남겨놓고 도착하지 않은 패킷을 기다리는 과정을 거치기 때문이다.

- 서버에서 클라이언트의 ACK 신호를 받으면 연결을 종료시킨다.